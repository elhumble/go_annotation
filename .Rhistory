geom_vline(xintercept = 5:24, colour = "white", size = 2) +
geom_point()
ggplot(filter(monthly, type %in% "mobile"), aes(month, month_out, group = type, colour = type)) + geom_path()
ggplot(filter(monthly, type %in% "mobile"), aes(month, month_out, group = type, colour = type)) + geom_point()
ggplot(filter(monthly, type %in% "mobile"), aes(month, month_out, group = type, colour = type)) + geom_point() + scale_x_continuous(breaks=1:12)
ggplot(filter(monthly, type %in% "clothes_beauty"), aes(month, month_out, group = type, colour = type)) + geom_point() + scale_x_continuous(breaks=1:12)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
summarise(month_out = sum(amount, na.rm = TRUE) %>%
arrange(month)
n = n()
)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
summarise(month_out = sum(amount, na.rm = TRUE) %>%
arrange(month),
n = n()
)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
arrange(summarise(month_out = sum(amount, na.rm = TRUE), month),
#arrange(summarise(by_plane, n = n()), desc(n))
n = n()
)
arrange(monthly, month)
monthly
?arrange
arrange(monthly, n)
arrange(monthly, month)
arrange(monthly, month, type)
new <- arrange(monthly, month, type)
View(new)
rm(new)
View(monthly)
View(finance)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n() %>%
filter(type == "mobile")
)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
summarise(month_out = sum(amount, na.rm = TRUE) %>%
filter(type == "mobile"),
n = n()
)
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "mobile") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
mean(monthly$month_out)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "electricity") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "electricity") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
finance$date <- as.Date(finance$date, "%d.%m.%Y")
finance <- gs_title("finances")
finance <- finance %>% gs_read()
finance$date <- as.Date(finance$date, "%d.%m.%Y")
finance <- mutate(finance,
month = month(as.POSIXlt(date, format="%d.%m.%Y")))
finance
str(finance$typr)
str(finance$type)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "electricity") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "transfer") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
View(finance)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "food") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
mean(monthly$month_out)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "travel") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
mean(monthly$month_out)
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "uni") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "entertainment") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
sum(month$month_out)/9
sum(month$month_out)
mean\(month$month_out)
mean\(month$month_out)
mean(month$month_out)
sum(monthly$month_out)/9
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "clothes_beauty") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
sum(monthly$month_out)/9
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "big_things") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
monthly <- finance %>%
filter(in_out == "out") %>%
group_by(type, month) %>%
filter(type == "cash") %>%
summarise(month_out = sum(amount, na.rm = TRUE),
n = n()
)
monthly
sum(monthly$month_out)/9
ggplot(data.frame(x=1:7),aes(x=1,y=x,fill=x))+geom_raster()+scale_fill_gradientn(colours=rainbow(7))
library(ggplot2)
ggplot(data.frame(x=1:7),aes(x=1,y=x,fill=x))+geom_raster()+scale_fill_gradientn(colours=rainbow(7))
library(googlesheets)
library(lubridate)
library(dplyr)
library(ggplot2)
finance <- gs_title("finances")
finance <- finance %>% gs_read()
finance$date <- as.Date(finance$date, "%d.%m.%Y")
finance <- mutate(finance,
month = month(as.POSIXlt(date, format="%d.%m.%Y")))
total_in <- finance %>%
filter(in_out == "in")
total_out <- finance %>%
filter(in_out == "out")
sum(total_in$amount) - sum(total_out$amount)
1239 + 101.25 + 150 + 58
1548 + 1400
1548 + 1400 -550
library(DiagrammeR)
grViz("
digraph boxes_and_circles {
# a 'graph' statement
graph [overlap = true, fontsize = 10]
# several 'node' statements
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
color = lightsteelblue]
A
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
color = cadetblue]
B
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
color = lavender]
C
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
color = cadetblue]
D
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
color = black]
34718; 34118; 29116
node [fontname = Helvetica,
fontcolor = slategrey,
shape = plaintext]
one two three four
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
style = filled,
fillcolor = lightsteelblue,
color = black]
14033 12380 68 X
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
style = filled,
fillcolor = lightblue,
color = black]
11350 10874 93 Y
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
style = filled,
fillcolor = lavender,
color = black]
1639 1585 89 Z
node [fontname = Helvetica,
fontcolor = black,
shape = circle,
style = filled,
fillcolor = cadetblue,
color = black]
2094 2039 90 ZA
node [shape = plaintext,
fontname = Helvetica,
fontcolor = dimgrey,
fontsize = 12,
style = '']
1 Universe 3 4 shared number mapped success
# several 'edge' statements
edge [color = gainsboro, arrowhead = vee, constraint = true]
A->34718 B->34718 C->34718 D->34718 34718->34118
34118->29116 29116->{one two three four}
edge [arrowhead = none, arrowtail = none, color = black] # need to shorten length
one -> 14033  [label = ' one', fontname = Helvetica, fontcolor = slategrey]
two -> 11350 [label = ' two', fontname = Helvetica, fontcolor = slategrey]
three -> 1639 [label = ' three', fontname = Helvetica, fontcolor = slategrey]
four -> 2094 [label = ' four', fontname = Helvetica, fontcolor = slategrey]
edge [color = gainsboro, arrowhead = vee, constraint = true]
14033 -> 12380
11350 -> 10874
1639 -> 1585
2094 -> 2039
12380 -> {68 X}
10874 -> {93 Y}
1585 -> {89 Z}
2039 -> {90 ZA}
edge [arrowhead = none, arrowtail = none, color = white]
1->Universe Universe->3 3->4 4->shared shared->number number->mapped mapped->success
A [label = '@@1']
B [label = '@@2']
C [label = '@@3']
D [label = '@@4']
1 [label = '@@5']
3 [label = '@@6']
4 [label = '@@7']
}
[1]: 'Swap454 \\n 11155'
[2]: 'Newbler \\n 14538'
[3]: 'BWA \\n 18353'
[4]: 'Bowtie2 \\n 15109'
[5]: 'Raw SNPs'
[6]: 'Good flanking \\n sequences'
[7]: 'ADT score \\n > 0.8'
")
#edge [constraint = false, splines = curved, color = gainsboro]
#a -> e
#b -> e
plot(cars)
devtools::install_github("jennybc/googlesheets")
library(googlesheets)
library(lubridate)
library(dplyr)
library(ggplot2)
gs_ls()
finance <- gs_title("finances")
finance <- finance %>% gs_read()
str(finance)
finance$date <- as.Date(finance$date, "%d.%m.%Y")
finance <- mutate(finance,
month = month(as.POSIXlt(date, format="%d.%m.%Y")))
total_in <- finance %>%
filter(in_out == "in")
total_out <- finance %>%
filter(in_out == "out")
sum(total_in$amount) - sum(total_out$amount)
citation()
lm(c(4,5,6)~c(6,7,8))
mod <- lm(c(4,5,6)~c(6,7,8))
summary(mod)
biocLite("GOstats")
source("https://bioconductor.org/biocLite.R")
source("https://bioconductor.org/biocLite.R")
source("http://bioconductor.org/biocLite.R")
biocLite("GOstats")
annotation <- readLines("../joined_transcriptome_ANNOTATED.txt")
setwd("~/Dropbox/PhD/Projects/Paper2_SNPdetection/go_annotation/map2slim")
annotation <- readLines("../joined_transcriptome_ANNOTATED.txt")
immune <- "oxidative damage"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "oxidative repair"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "oxidative"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "oxidative\s\repair"
immune <- "oxidative|repair"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "response to oxidative stress"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "response|to|oxidative|stress"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
immune <- "(response to oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
geneIDs <- c("DAF", "CTL1", "SHC")
immuneLines <- NULL
for(i in geneIDs)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
head(immuneLines)
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,14:18)]
names(immuneTable) <- c("Contig_Name", "goTerm", "CC", "BP", "MF", "keywords") # 1618
head(immuneTable)
View(immuneTable)
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,8,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID" "goTerm", "CC", "BP", "MF", "keywords") # 1618
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
View(immuneTable)
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
View(immuneTable)
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name") # %>%
require(dplyr)
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name") # %>%
View(immuneSnps)
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")  %>%
write.csv("~/Desktop/candidateSNPs.csv", row.names = F)
immune <- "(response to oxidative stress)"
immuneLines <- NULL
for(i in geneIDs)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")
View(immuneSnps)
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")
View(immuneSnps)
View(immuneTable)
immune <- "(regulation of oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
View(immuneTable)
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
View(immuneTable)
immune <- "(oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
View(immuneTable)
head(immuneTable)
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")
View(immuneSnps)
immune <- "(regulation of oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")
immune <- "(oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
# merge with snp dataframe to determine number of SNPs
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")  %>%
write.csv("~/Desktop/oxidativestressSNPs.csv", row.names = F)
immune <- "(oxidative stress)"
immuneLines <- NULL
for(i in immune)
immuneLines <- c(immuneLines, annotation[grep(i, annotation, ignore.case=T)])
length(strsplit(immuneLines[1], split = "\t")[[1]])
immuneTable <- matrix(ncol = 18,
nrow = length(immuneLines))
# fill table
for(i in 1:length(immuneLines))
immuneTable[i,1:length(strsplit(immuneLines[i], split = "\t")[[1]])] <- strsplit(immuneLines[i], split = "\t")[[1]]
immuneTable <- data.frame(immuneTable)[,c(1,10,14:18)]
names(immuneTable) <- c("Contig_Name", "geneID", "goTerm", "CC", "BP", "MF", "keywords") # 1618
# merge with snp dataframe to determine number of SNPs
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")  %>%
write.csv("~/Desktop/oxidativestressSNPs.csv", row.names = F)
immuneSnps <- read.csv("../../snp_filtering_pipeline/data/processed/global_snps_hq.csv", header = T)[,1:2] %>% # 34,718 snps
inner_join(immuneTable, by = "Contig_Name")
length(unique(immuneSnps$Contig_Name))
